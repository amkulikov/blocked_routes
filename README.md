# Blocked Routes

ðŸš§**Ð’ Ð ÐÐ—Ð ÐÐ‘ÐžÐ¢ÐšÐ•**ðŸš§

Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ð° Ð¿Ñ€ÐµÐ´Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð° Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð´Ð»Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ð¸ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² OpenVPN, 
ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±ÑƒÐ´ÑƒÑ‚ Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð½Ð° Ñ‚ÐµÑ€Ñ€Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð Ð¤ Ð°Ð´Ñ€ÐµÑÐ° Ð¸ Ð¿Ð¾Ð´ÑÐµÑ‚Ð¸.

Ð¢Ð°Ðº ÐºÐ°Ðº ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ ÑƒÐ¶Ðµ Ð¿ÐµÑ€ÐµÐ²Ð°Ð»Ð¸Ð»Ð¾ Ð·Ð° ÑÑ‚Ð¾ Ñ‚Ñ‹ÑÑÑ‡, 
Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ñ‚Ð°ÐºÐ¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾. Ð˜Ð¼ÐµÐ½Ð½Ð¾ Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð² ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´ÑƒÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ½ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ 
Ð³Ñ€ÑƒÐ±Ð¾Ð³Ð¾ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ Ð°Ð´Ñ€ÐµÑÐ¾Ð² Ð¸ Ð¿Ð¾Ð´ÑÐµÑ‚ÐµÐ¹ Ð² Ð±Ð¾Ð»ÐµÐµ ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ðµ Ð¿Ð¾Ð´ÑÐµÑ‚Ð¸. ÐŸÑ€Ð¸ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ "Ð¶Ð°Ð´Ð½Ñ‹Ð¹" Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼, 
ÑÑ‚Ñ€ÐµÐ¼ÑÑ‰Ð¸Ð¹ÑÑ Ð¼Ð¸Ð½Ð¸Ð¼Ð¸Ð·Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÐÐ•Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð°Ð´Ñ€ÐµÑÐ¾Ð² Ð² Ð¸Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ñ… Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð°Ñ….

## ÐšÐ°Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ

`build/blocked_routes` - Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ ÑÐ±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ Ð¿Ð¾Ð´ Linux 64bit. 
Ð”Ð»Ñ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ ÑÐ±Ð¾Ñ€ÐºÐ¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ Golang Ð¸ ÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ `go build`.


### Ð¤Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð²
ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ ÐºÐ»ÑŽÑ‡Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°:
* `-src` - Ð¿ÑƒÑ‚ÑŒ Ðº Ñ„Ð°Ð¹Ð»Ñƒ Ð¸Ð»Ð¸ URL Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¾ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ñ€ÐµÑÑƒÑ€ÑÐ°Ñ…. ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð±ÐµÑ€Ñ‘Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· stdin.
* `-max` - Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð².
ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð¾Ð´ÑÐµÑ‚ÐµÐ¹ Ð¸ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð°Ð´Ñ€ÐµÑÐ¾Ð².
* `-silent` - Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð²Ð¾Ð´ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð² stderr.
* `-exclude` - Ð¸ÑÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÑÐµÑ‚Ð¸. Ð”Ð²Ð° Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð°: Ð»Ð¸Ð±Ð¾ CIDR, Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð¿ÑÑ‚Ð¾Ð¹, Ð»Ð¸Ð±Ð¾ Ð¿ÑƒÑ‚ÑŒ Ðº Ñ„Ð°Ð¹Ð»Ñƒ Ñ Ð¸ÑÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼Ñ‹Ð¼Ð¸ Ð¿Ð¾Ð´ÑÐµÑ‚ÑÐ¼Ð¸.
* `-output` - Ð¾ÑÐ¾Ð±Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð°. "cidr", "ovpn", "push-ovpn".

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼Ð¸ OpenVPN

Ð”Ð»Ñ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ñ… Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ `push "route x.x.x.x y.y.y.y"` Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ… ÑÐµÑ€Ð²ÐµÑ€Ð°.
Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ¿Ñ€Ð¾ÑÑ‚Ð¸Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÐ½Ñƒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð², Ð²Ñ‹Ð½ÐµÑÐµÐ¼ Ð¸Ñ… Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» `/etc/openvpn/routes.conf`, 
Ð° Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ ÑÐµÑ€Ð²ÐµÑ€Ð° Ð´Ð¾Ð±Ð°Ð²Ð¸Ð¼ ÑÑ‚Ñ€Ð¾Ñ‡ÐºÑƒ `config /etc/openvpn/routes.conf`.

ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ routes.conf Ñ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ñ‚Ñ‹ÑÑÑ‡ÐµÐ¹ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð², Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ð¼:
```
./blocked_routes -src="https://github.com/zapret-info/z-i/raw/master/dump.csv" -max=1000 -output="push-ovpn" > /etc/openvpn/routes.conf
```

Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸, Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²ÐµÑ€ openvpn.

**ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ð½Ð° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ñ… Ð½Ðµ Ð¿Ð¾Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ, Ð¿Ð¾ÐºÐ° Ð¾Ð½Ð¸ ÑÐ°Ð¼Ð¸ Ð½Ðµ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑÑ!**

## Ð Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ðµ IP-Ð°Ð´Ñ€ÐµÑÐ°

Ð•ÑÐ»Ð¸ Ð°Ð´Ñ€ÐµÑ Ð²Ð°ÑˆÐµÐ³Ð¾ VPN ÑÐµÑ€Ð²ÐµÑ€Ð° Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð¿Ð¾Ð´ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹, Ð¸Ð¼ÐµÐµÑ‚ ÑÐ¼Ñ‹ÑÐ» Ð¸ÑÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¸Ð· Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð²ÑÐµ IP, Ð¾Ñ‚Ð½Ð¾ÑÑÑ‰Ð¸ÐµÑÑ Ðº Ð Ð¤, 
Ñ‚Ð°Ðº ÐºÐ°Ðº Ðº Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ñƒ Ð¸Ð· Ð½Ð¸Ñ… Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑÑ.

Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ñ… Ð¿Ð¾Ð´ÑÐµÑ‚ÐµÐ¹ ÑƒÐ¶Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ÑÑ Ð² `samples/russian_nets.txt` Ð¸ ÐµÐ³Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ñ ÐºÐ»ÑŽÑ‡Ð¾Ð¼ `-exclude`. 
Ð­Ñ‚Ð¾Ñ‚ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½ Ð³Ñ€ÑƒÐ±Ñ‹Ð¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ñ… IP-Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð°Ñ… ÐŸÑ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ `cmd/russian_nets`:

```
go run ./cmd/russian_nets/main.go ./cmd/russian_nets/geo_ip_ranges.txt > ./samples/russian_nets.txt
```